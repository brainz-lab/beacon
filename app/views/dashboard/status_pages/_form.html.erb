<%= form_with model: [:dashboard, status_page], class: "space-y-6 bg-white shadow rounded-lg p-6" do |f| %>
  <% if status_page.errors.any? %>
    <div class="rounded-md bg-red-50 p-4">
      <ul class="list-disc pl-5 text-sm text-red-700">
        <% status_page.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="grid grid-cols-2 gap-4">
    <div>
      <%= f.label :name, class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_field :name, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm", placeholder: "API Status" %>
    </div>
    <div>
      <%= f.label :slug, "URL Slug", class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_field :slug, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm", placeholder: "api-status" %>
      <p class="mt-1 text-xs text-gray-500">URL: /status/<%= status_page.slug.presence || "your-slug" %></p>
    </div>
  </div>

  <div>
    <%= f.label :custom_domain, class: "block text-sm font-medium text-gray-700" %>
    <%= f.text_field :custom_domain, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm", placeholder: "status.example.com" %>
  </div>

  <div class="border-t border-gray-200 pt-6">
    <h4 class="text-sm font-medium text-gray-900 mb-4">Branding</h4>

    <div class="grid grid-cols-2 gap-4">
      <div>
        <%= f.label :company_name, class: "block text-sm font-medium text-gray-700" %>
        <%= f.text_field :company_name, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm" %>
      </div>
      <div>
        <%= f.label :company_url, class: "block text-sm font-medium text-gray-700" %>
        <%= f.url_field :company_url, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm", placeholder: "https://example.com" %>
      </div>
    </div>

    <div class="mt-4">
      <%= f.label :description, class: "block text-sm font-medium text-gray-700" %>
      <%= f.text_area :description, rows: 2, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm" %>
    </div>

    <div class="grid grid-cols-3 gap-4 mt-4">
      <div>
        <%= f.label :logo_url, class: "block text-sm font-medium text-gray-700" %>
        <%= f.url_field :logo_url, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm" %>
      </div>
      <div>
        <%= f.label :favicon_url, class: "block text-sm font-medium text-gray-700" %>
        <%= f.url_field :favicon_url, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm" %>
      </div>
      <div>
        <%= f.label :primary_color, class: "block text-sm font-medium text-gray-700" %>
        <%= f.color_field :primary_color, class: "mt-1 block w-full h-10 rounded-md border-gray-300 shadow-sm" %>
      </div>
    </div>
  </div>

  <div class="border-t border-gray-200 pt-6">
    <h4 class="text-sm font-medium text-gray-900 mb-4">Display Options</h4>

    <div class="space-y-3">
      <div class="flex items-center">
        <%= f.check_box :public, class: "h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500" %>
        <%= f.label :public, "Public (accessible without authentication)", class: "ml-2 block text-sm text-gray-700" %>
      </div>
      <div class="flex items-center">
        <%= f.check_box :show_uptime, class: "h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500" %>
        <%= f.label :show_uptime, "Show uptime percentages", class: "ml-2 block text-sm text-gray-700" %>
      </div>
      <div class="flex items-center">
        <%= f.check_box :show_response_time, class: "h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500" %>
        <%= f.label :show_response_time, "Show response times", class: "ml-2 block text-sm text-gray-700" %>
      </div>
      <div class="flex items-center">
        <%= f.check_box :show_incidents, class: "h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500" %>
        <%= f.label :show_incidents, "Show incident history", class: "ml-2 block text-sm text-gray-700" %>
      </div>
      <div class="flex items-center">
        <%= f.check_box :allow_subscriptions, class: "h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500" %>
        <%= f.label :allow_subscriptions, "Allow email/SMS subscriptions", class: "ml-2 block text-sm text-gray-700" %>
      </div>
    </div>

    <div class="mt-4">
      <%= f.label :uptime_days_shown, "Days of uptime history to show", class: "block text-sm font-medium text-gray-700" %>
      <%= f.select :uptime_days_shown, [[30, 30], [60, 60], [90, 90]], {}, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm" %>
    </div>
  </div>

  <div class="flex justify-end space-x-3 pt-4">
    <%= link_to "Cancel", dashboard_status_pages_path, class: "rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50" %>
    <%= f.submit status_page.persisted? ? "Update Status Page" : "Create Status Page", class: "rounded-md bg-emerald-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500 cursor-pointer" %>
  </div>
<% end %>
